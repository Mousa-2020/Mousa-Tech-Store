<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mousa Tech Store | ูุชุฌุฑ ููุณู ููุฅููุชุฑูููุงุช</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico">
</head>
<body>
    <!-- ุงูููุฏุฑ -->
    <header class="header">
        <div class="container">
            <img src="logo.png" alt="Mousa Tech Store" class="logo">
            <div class="header-buttons">
                <button class="icon-btn" onclick="window.location.href='cart.html'">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </button>
                <button class="icon-btn" onclick="window.location.href='profile.html'">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- ุดุฑูุท ุงูุจุญุซ -->
    <div class="container">
        <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ููุชุฌ..." class="search-input">
        </div>
    </div>

    <!-- ุชุจููุจ ุงููุฆุงุช -->
    <div class="container">
        <div class="categories">
            <button class="category-btn active" onclick="filterProducts('all')">ุงููู</button>
            <button class="category-btn" onclick="filterProducts('apple')">๐ฑ ุฃุจู</button>
            <button class="category-btn" onclick="filterProducts('samsung')">๐ฑ ุณุงูุณููุฌ</button>
            <button class="category-btn" onclick="filterProducts('gaming')">๐ฎ ุฃูุนุงุจ</button>
            <button class="category-btn" onclick="filterProducts('accessories')">๐ง ุฅูุณุณูุงุฑุงุช</button>
            <button class="category-btn" onclick="filterProducts('health')">๐ฅ ุตุญุฉ</button>
            <button class="category-btn" onclick="filterProducts('tech')">๐ ุชูููุงุช</button>
        </div>
    </div>

    <!-- ูุณู ุงูููุชุฌุงุช -->
    <section class="container">
        <h2 class="section-title">๐ฅ ุงูุฃูุซุฑ ูุจูุนุงู</h2>
        <div class="products-grid" id="productsGrid"></div>
    </section>

    <!-- ูุณู ุฌุฏูุฏ ุงููุชุฌุฑ -->
    <section class="container">
        <h2 class="section-title">โจ ุฌุฏูุฏ ุงููุชุฌุฑ</h2>
        <div class="products-grid" id="newProductsGrid"></div>
    </section>

    <!-- ุฒุฑ ุงููุงุชุณุงุจ ุงูุซุงุจุช -->
    <a href="https://wa.me/9647717538315" class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <script src="products.js"></script>
    <script>
        // ===== ุงููุชุบูุฑุงุช ุงูุนุงูุฉ =====
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentFilter = 'all';
        let allProducts = [];

        // ===== ุชุญููู ุงูููุชุฌุงุช =====
        function loadProducts() {
            // ูุญุงูู ูุฌูุจ ุงูููุชุฌุงุช ูู localStorage (ุงููู ุนุฏูุชูุง ูู ููุญุฉ ุงูุชุญูู)
            const savedProducts = localStorage.getItem('products');
            
            if (savedProducts) {
                // ุฅุฐุง ูู ููุชุฌุงุช ูู localStorageุ ูุณุชุฎุฏููุง
                allProducts = JSON.parse(savedProducts);
                console.log('โ ุชู ุชุญููู ุงูููุชุฌุงุช ูู ููุญุฉ ุงูุชุญูู:', allProducts.length);
            } else {
                // ุฅุฐุง ูุง ููุ ูุณุชุฎุฏู products.js ูุงุญุชูุงุทู
                allProducts = [];
                for (const category in productsData) {
                    allProducts = allProducts.concat(productsData[category]);
                }
                console.log('โ ุชู ุชุญููู ุงูููุชุฌุงุช ูู ุงูููู ุงูุซุงุจุช');
            }
            
            // ุนุฑุถ ุงูููุชุฌุงุช
            displayProducts();
        }

        // ===== ุนุฑุถ ุงูููุชุฌุงุช =====
        function displayProducts() {
            const grid = document.getElementById('productsGrid');
            if (!grid) return;

            let productsToShow = [];
            
            if (currentFilter === 'all') {
                productsToShow = allProducts;
            } else {
                productsToShow = allProducts.filter(p => p.category === currentFilter);
            }
            
            if (productsToShow.length === 0) {
                grid.innerHTML = '<p style="text-align: center; padding: 40px;">ูุง ุชูุฌุฏ ููุชุฌุงุช</p>';
                return;
            }

            grid.innerHTML = productsToShow.slice(0, 8).map(product => `
                <div class="product-card">
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">$${product.price}</div>
                        <button class="add-to-cart" onclick="addToCart(${product.id})">
                            <i class="fas fa-shopping-cart"></i> ุฃุถู ููุณูุฉ
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // ===== ุฅุถุงูุฉ ููุณูุฉ =====
        function addToCart(productId) {
            const product = allProducts.find(p => p.id === productId);
            
            if (product) {
                cart.push(product);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                alert('โ ุชูุช ุงูุฅุถุงูุฉ ููุณูุฉ');
            }
        }

        // ===== ุชุญุฏูุซ ุนุฏุงุฏ ุงูุณูุฉ =====
        function updateCartCount() {
            document.querySelectorAll('.cart-count').forEach(el => {
                el.textContent = cart.length;
            });
        }

        // ===== ุชุตููุฉ ุงูููุชุฌุงุช =====
        function filterProducts(category) {
            currentFilter = category;
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            displayProducts();
        }

        // ===== ุงูุจุญุซ =====
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            updateCartCount();

            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase();
                    const filtered = allProducts.filter(p => 
                        p.name.toLowerCase().includes(searchTerm)
                    );
                    
                    const grid = document.getElementById('productsGrid');
                    if (filtered.length === 0) {
                        grid.innerHTML = '<p style="text-align: center; padding: 40px;">ูุง ุชูุฌุฏ ูุชุงุฆุฌ</p>';
                    } else {
                        grid.innerHTML = filtered.map(product => `
                            <div class="product-card">
                                <div class="product-image">
                                    <img src="${product.image}" alt="${product.name}">
                                </div>
                                <div class="product-info">
                                    <div class="product-name">${product.name}</div>
                                    <div class="product-price">$${product.price}</div>
                                    <button class="add-to-cart" onclick="addToCart(${product.id})">
                                        <i class="fas fa-shopping-cart"></i> ุฃุถู ููุณูุฉ
                                    </button>
                                </div>
                            </div>
                        `).join('');
                    }
                });
            }
        });
    </script>
</body>
</html>
